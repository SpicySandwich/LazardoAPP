package com.client.LazardoClient.DAO;

import com.client.LazardoClient.Model.Payment;

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Update;

@Mapper
public interface PayProductRepo {
	
	final String ALL_PRODUCT_PAYMENT ="UPDATE tbclientdetails "
																		+ "JOIN( "
																		+ "SELECT cd.client_id, cd.money_balance - SUM(lp.product_price)  AS currentbalance "
																		+ "FROM tbclientlogin cl  "
																		+ "LEFT JOIN tbclientdetails cd ON cd.client_id = cl.client_login_id "
																		+ "LEFT JOIN tbpurchasedetails pd ON pd.client_purchase_id =cd.client_id "
																		+ "LEFT JOIN tblazardoproduct lp  ON lp.product_id = pd.client_product_purchase_id "
																		+ "GROUP BY cd.client_id\r\n"
																		+ ") total\r\n"
																		+ "SET money_balance =  if(total.currentbalance >= 0, total.currentbalance, money_balance) "
																		+ "WHERE client_email = #{clientEmailPayment} " ;
	
	final String MUTIPLE_PRODUCT_PAYMENT = "";
	
	@Insert("")
	public boolean payProductPurhcase(Payment payment);
	
	@Update(ALL_PRODUCT_PAYMENT)
	public boolean payAllProductPurchase(Payment payment);

	
}
