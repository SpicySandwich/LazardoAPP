package com.client.LazardoClient.DAO;

import com.client.LazardoClient.Model.Payment;

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Mapper;

@Mapper
public interface PayProductRepo {
	
	final String ALL_PRODUCT_PAYMENT ="UPDATE "
																		+ "tbclientdetails cd "
																		+ "LEFT JOIN  "
																		+ "tbclientlogin cl "
																		+ "ON cl.client_login_id = cd.client_id "
																		+ "LEFT JOIN "
																		+ "tbpurchasedetails pd "
																		+ "ON  pd.client_purchase_id = cd.client_id "
																		+ "JOIN( SELECT lp.product_id, SUM(lp.product_price) AS totalprice "
																		+ "           FROM tblazardoproduct lp "
																		+ "		   GROUP BY lp.product_id "
																		+ "         )AS total "
																		+ "ON total.product_id = pd.client_product_purchase_id "
																		+ "SET cd.money_balance = cd.money_balance - total.totalprice "
																		+ "WHERE cd.client_email = #{clientEmailPayment}" ;

	
	final String MUTIPLE_PRODUCT_PAYMENT = "";
	
	@Insert("")
	public boolean payProductPurhcase(Payment payment);
	
	@Insert(ALL_PRODUCT_PAYMENT)
	public boolean payAllProductPurchase(Payment payment);

	
}
